<head>
    <link rel="stylesheet" type="text/css" href="public/css/style.css">
    <script src="https://kit.fontawesome.com/f25d8c8b5a.js" crossorigin="anonymous"></script>
</head>

<body class="cardBG">
    <nav class="navFlex">

        <img src="./images/memory.png" alt="" class="navLogo">
        <div>
            <button class="navBtn navScore">
                <i class="fa-solid fa-star" style="color: #ffffff;"></i>
            </button>
            <button class="navBtn navQuit">
                <i class="fa-solid fa-right-from-bracket" style="color: #ffffff;"></i>
            </button>
        </div>
    </nav>
    <section class="memory-game">
        <div class="memory-card" data-framework="aurelia">
            <img class="front-face" src="./images/cook.png" alt="cooker" />
            <img class="back-face" src="./images/mark.webp" alt="JS Badge" />
        </div>
        <div class="memory-card" data-framework="aurelia">
            <img class="front-face" src="./images/cook.png" alt="cooker" />
            <img class="back-face" src="./images/mark.webp" alt="JS Badge" />
        </div>

        <div class="memory-card" data-framework="vue">
            <img class="front-face" src="./images/teeth.png" alt="teeth" />
            <img class="back-face" src="./images/mark.webp" alt="JS Badge" />
        </div>
        <div class="memory-card" data-framework="vue">
            <img class="front-face" src="./images/teeth.png" alt="teeth" />
            <img class="back-face" src="./images/mark.webp" alt="JS Badge" />
        </div>

        <div class="memory-card" data-framework="angular">
            <img class="front-face" src="./images/nerd.webp" alt="Angular" />
            <img class="back-face" src="./images/mark.webp" alt="JS Badge" />
        </div>
        <div class="memory-card" data-framework="angular">
            <img class="front-face" src="./images/nerd.webp" alt="Angular" />
            <img class="back-face" src="./images/mark.webp" alt="JS Badge" />
        </div>

        <div class="memory-card" data-framework="ember">
            <img class="front-face" src="./images/cheese.png" alt="Ember" />
            <img class="back-face" src="./images/mark.webp" alt="JS Badge" />
        </div>
        <div class="memory-card" data-framework="ember">
            <img class="front-face" src="./images/cheese.png" alt="Ember" />
            <img class="back-face" src="./images/mark.webp" alt="JS Badge" />
        </div>

        <div class="memory-card" data-framework="backbone">
            <img class="front-face" src="./images/tennis.png" alt="Backbone" />
            <img class="back-face" src="./images/mark.webp" alt="JS Badge" />
        </div>
        <div class="memory-card" data-framework="backbone">
            <img class="front-face" src="./images/tennis.png" alt="Backbone" />
            <img class="back-face" src="./images/mark.webp" alt="JS Badge" />
        </div>

        <div class="memory-card" data-framework="react">
            <img class="front-face" src="./images/skull.png" alt="React" />
            <img class="back-face" src="./images/mark.webp" alt="JS Badge" />
        </div>
        <div class="memory-card" data-framework="react">
            <img class="front-face" src="./images/skull.png" alt="React" />
            <img class="back-face" src="./images/mark.webp" alt="JS Badge" />
        </div>
    </section>
    <footer class="footerFlex">
        <div class="topFooter">
            Remaining Matches: 9
        </div>
        <div class="bottomFooter">
            <div class="bestTime bottomBtn bottomTime">
                <img src="./images/trophy.webp" alt="trophy">
                <div id="bestTime">
                    0:12
                </div>
            </div>
            <div class="currentTime bottomBtn bottomTime">
                <img src="./images/clock.png" alt="clock">
                <div id="currentTime">
                    0:12
                </div>
            </div>
            <div class="resetBtn bottomBtn" onclick="reset()">
                RESET
            </div>
        </div>
    </footer>
    <script>
        const cards = document.querySelectorAll('.memory-card');
            const currentTime = document.getElementById('#currentTime');

            let hasFlippedCard = false;
            let lockBoard = false;
            let firstCard, secondCard;

            function flipCard() {
                if (lockBoard) return;
                if (this === firstCard) return;

                this.classList.add('flip');

                if (!hasFlippedCard) {
                    // first click
                    hasFlippedCard = true;
                    firstCard = this;
                    return;
                }

                // second click
                secondCard = this;

                checkForMatch();
            }

            function checkForMatch() {
                let isMatch = firstCard.dataset.framework === secondCard.dataset.framework;

                isMatch ? disableCards() : unflipCards();
            }

            function disableCards() {
                firstCard.removeEventListener('click', flipCard);
                secondCard.removeEventListener('click', flipCard);

                resetBoard();
            }

            function unflipCards() {
                lockBoard = true;

                setTimeout(() => {
                    firstCard.classList.remove('flip');
                    secondCard.classList.remove('flip');

                    resetBoard();
                }, 1500);
            }

            function resetBoard() {
                [hasFlippedCard, lockBoard] = [false, false];
                [firstCard, secondCard] = [null, null];
            }

            (function shuffle() {
                cards.forEach((card) => {
                    let randomPos = Math.floor(Math.random() * 12);
                    card.style.order = randomPos;
                });
            })();

            cards.forEach((card) => card.addEventListener('click', flipCard));

            function reset() {
                location.reload();
            }
    </script>
</body>